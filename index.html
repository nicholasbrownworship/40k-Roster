<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Crusade Roster</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Warhammer 40,000 10e Crusade roster viewer and unit manager." />

  <link rel="stylesheet" href="styles.css" />
  <script src="script.js" defer></script>

  <style>
    /* Minimal modal styling – rest of the look comes from styles.css theme */
    .unit-modal {
      position: fixed;
      inset: 0;
      display: none;
      z-index: 80;
    }
    .unit-modal.open {
      display: block;
    }
    .unit-modal-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.6);
    }
    .unit-modal-dialog {
      position: relative;
      max-width: 960px;
      max-height: 90vh;
      margin: 4vh auto;
      background: #020617;
      border-radius: 16px;
      border: 1px solid #1f2937;
      box-shadow: 0 24px 80px rgba(0,0,0,0.6);
      padding: 1rem 1.25rem 1.25rem;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    .unit-modal-body {
      overflow-y: auto;
      padding-right: .4rem;
    }
    #unit-modal-close {
      position: absolute;
      top: .5rem;
      right: .5rem;
      border: none;
      border-radius: 999px;
      padding: .1rem .5rem;
      background: #111827;
      color: #e5e7eb;
      cursor: pointer;
      font-size: 1.2rem;
      line-height: 1;
    }
    .unit-detail-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
      gap: 1rem;
    }
    @media (max-width: 800px) {
      .unit-detail-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }
    .unit-detail-section {
      border-radius: 12px;
      border: 1px solid #1f2937;
      background: radial-gradient(circle at top, #0f172a 0, #020617 55%);
      padding: .75rem .9rem;
      margin-bottom: .5rem;
    }
    .unit-detail-section h3 {
      margin: 0 0 .4rem;
      font-size: .9rem;
      text-transform: uppercase;
      letter-spacing: .12em;
      color: #9ca3af;
    }
    .unit-detail-fields {
      display: flex;
      flex-wrap: wrap;
      gap: .5rem;
    }
    .unit-detail-fields > div {
      flex: 1 1 140px;
    }
    .unit-detail-label {
      font-size: .75rem;
      display: block;
      margin-bottom: .1rem;
      color: #9ca3af;
    }
    .unit-detail-input,
    .unit-detail-select,
    .unit-detail-textarea {
      width: 100%;
      padding: .3rem .45rem;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      color: #e5e7eb;
      font-size: .8rem;
    }
    .unit-detail-textarea {
      border-radius: 12px;
      resize: vertical;
      min-height: 70px;
    }
    .unit-detail-pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: .35rem;
      font-size: .75rem;
    }
    .unit-detail-pill {
      border-radius: 999px;
      padding: .15rem .45rem;
      border: 1px solid #374151;
      background: #020617;
      color: #d1d5db;
    }
    .unit-detail-list {
      list-style: none;
      padding: 0;
      margin: 0;
      font-size: .8rem;
    }
    .unit-detail-list li {
      padding: .2rem 0;
      border-bottom: 1px dashed rgba(55,65,81,0.6);
    }
    .unit-detail-list li:last-child {
      border-bottom: none;
    }
    .unit-detail-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: .75rem;
      padding-top: .6rem;
      border-top: 1px solid #111827;
      margin-top: .5rem;
    }
    .btn-sm {
      font-size: .8rem;
      padding: .35rem .7rem;
      border-radius: 999px;
      cursor: pointer;
      border: 1px solid transparent;
      background: #111827;
      color: #e5e7eb;
    }
    .btn-primary-sm {
      border-color: #22c55e;
      background: #166534;
      color: #e5e7eb;
    }
    .btn-danger-sm {
      border-color: #f97373;
      background: #7f1d1d;
      color: #fee2e2;
    }
    .unit-manage-btn {
      font-size: .75rem;
      padding: .25rem .55rem;
      border-radius: 999px;
      border: 1px solid #38bdf8;
      background: #0e7490;
      color: #e5e7eb;
      cursor: pointer;
      white-space: nowrap;
    }
  </style>
</head>
<body>
  <div id="site-header"></div>

  <main class="app-shell">
    <header class="app-header">
      <div class="app-title-block">
        <h1>Crusade Roster</h1>
        <p>View player rosters, filter by team and role, and open a full datacard for each unit.</p>
      </div>
      <div class="app-meta">
        <div>Total Units: <span id="meta-total-units">0</span></div>
        <div>Last Updated: <span id="meta-last-updated">–</span></div>
      </div>
    </header>

    <!-- Filters -->
    <section class="roster-section" style="margin-bottom:1rem;">
      <div style="display:flex; flex-wrap:wrap; gap:.5rem; align-items:flex-end;">
        <div style="flex:1 1 140px;">
          <label for="filter-team" style="font-size:.8rem; display:block; margin-bottom:.1rem;">Team</label>
          <select id="filter-team" style="width:100%; padding:.35rem .5rem; border-radius:999px; border:1px solid #1f2937; background:#020617; color:#e5e7eb;">
            <option value="">Any team</option>
            <option value="Defenders">Defenders</option>
            <option value="Attackers">Attackers</option>
            <option value="Raiders">Raiders</option>
          </select>
        </div>
        <div style="flex:1 1 180px;">
          <label for="filter-player" style="font-size:.8rem; display:block; margin-bottom:.1rem;">Player</label>
          <select id="filter-player" style="width:100%; padding:.35rem .5rem; border-radius:999px; border:1px solid #1f2937; background:#020617; color:#e5e7eb;">
            <option value="">Select a player…</option>
          </select>
        </div>
        <div style="flex:1 1 160px;">
          <label for="filter-role" style="font-size:.8rem; display:block; margin-bottom:.1rem;">Battlefield Role</label>
          <select id="filter-role" style="width:100%; padding:.35rem .5rem; border-radius:999px; border:1px solid #1f2937; background:#020617; color:#e5e7eb;">
            <option value="">Any role</option>
            <option value="Character">Character</option>
            <option value="Battleline">Battleline</option>
            <option value="Dedicated Transport">Dedicated Transport</option>
            <option value="Other Datasheets">Other Datasheets</option>
          </select>
        </div>
        <div style="flex:2 1 220px;">
          <label for="filter-search" style="font-size:.8rem; display:block; margin-bottom:.1rem;">Search</label>
          <input id="filter-search" type="search" placeholder="Search by unit, unique name, faction, army…" style="width:100%; padding:.35rem .5rem; border-radius:999px; border:1px solid #1f2937; background:#020617; color:#e5e7eb;" />
        </div>
      </div>
    </section>

    <!-- Roster output -->
    <section id="roster-section" class="roster-section">
      <!-- Filled by script.js -->
    </section>
  </main>

  <!-- Unit Detail Modal -->
  <div id="unit-modal" class="unit-modal">
    <div class="unit-modal-backdrop"></div>
    <div class="unit-modal-dialog">
      <button id="unit-modal-close" title="Close">&times;</button>
      <div class="unit-modal-body">
        <div id="unit-modal-content">
          <!-- Filled by script.js -->
        </div>
      </div>
    </div>
  </div>
</body>
</html>
